function onLoadInit(){searchKeyword.value="",searchKeyword.style.borderColor="#ddd",searchBtn.setAttribute("disabled","disabled"),searchBtn.classList.add("btn-disabled")}function searchBoxAction(e){null!=e.target.value&&""!=e.target.value?(searchKeyword.style.borderColor="#ddd",searchBtn.removeAttribute("disabled"),searchBtn.classList.remove("btn-disabled")):(searchBtn.setAttribute("disabled","disabled"),searchBtn.classList.add("btn-disabled"))}async function searchBookmarks(){let e=searchKeyword.value.trim();null!=e&&""!=e?(result.innerHTML=initLoading(),await getSearchBookmarks(e).then(e=>{infoText.innerHTML="Getting your search bookmarks....",loadBookmarks(e,"search")}).catch(e=>{loadErrors(e)})):(searchKeyword.focus(),searchKeyword.style.borderColor="red")}async function recentBookmarks(){result.innerHTML=initLoading(),onLoadInit(),await getRecentBookmarks().then(e=>{infoText.innerHTML="Getting your recent bookmarks....",loadBookmarks(e,"recent")}).catch(e=>{loadErrors(e)})}async function allBookmarks(){result.innerHTML=initLoading(),onLoadInit(),await getAllBookmarks().then(e=>{infoText.innerHTML="Getting your all bookmarks....",loadBookmarks(e,"all")}).catch(e=>{loadErrors(e)})}function fetchBookmarks(e){e.forEach(function(e){void 0!==e.url&&null!==e.url&&bookmarObject.push({title:e.title,url:e.url,createdAt:formatDate(e.dateAdded)}),e.children&&fetchBookmarks(e.children)})}function getAllBookmarks(){return new Promise((e,r)=>{try{bookmarObject=new Array,chrome.bookmarks.getTree(function(r){fetchBookmarks(r),e(JSON.stringify(bookmarObject))})}catch(e){r("Something Went Wrong!! Please Try Again...")}})}function getRecentBookmarks(){return new Promise((e,r)=>{try{let t=new Array;chrome.bookmarks.getRecent(100,r=>{r.forEach(function(e){void 0!==e.url&&null!==e.url&&t.push({title:e.title,url:e.url,createdAt:formatDate(e.dateAdded)})}),e(JSON.stringify(t))})}catch(e){r("Something Went Wrong!! Please Try Again...")}})}function getSearchBookmarks(e){return new Promise((r,t)=>{try{let n=new Array;chrome.bookmarks.search(e,e=>{e.forEach(function(e){void 0!==e.url&&null!==e.url&&n.push({title:e.title,url:e.url,createdAt:formatDate(e.dateAdded)})}),r(JSON.stringify(n))})}catch(e){t("Something Went Wrong!! Please Try Again...")}})}function formatDate(e){return new Date(e).toISOString().slice(0,10).replace(/-/g,"/")}function loadBookmarks(e,r=null){result.innerHTML=initLoading(),e&&setTimeout(()=>{let t=JSON.parse(e);if("search"==r&&(t=t.reverse()),t.length&&Object.keys(t)){let e="";t.map((r,t)=>{e+=`<tr class="bookmark-row" id="bookmarkRow${t}">\n                        <td>\n                            <span class="bookmark-title">${r.title}</span><br/>\n                            <a href="${r.url}" class="bookmark-link" target="_blank">${r.url}</a>\n                        </td>\n                        <td><span class="bookmark-date">${r.createdAt}</span></td>\n                    </tr>`}),result.innerHTML=e,infoText.innerHTML="","recent"==r&&(infoText.innerHTML=`Recent ${t.length} Bookmarks`),"all"==r&&(infoText.innerHTML=`Your all Bookmarks - ${t.length}`),"search"==r&&(infoText.innerHTML=`Found - ${t.length} Bookmarks`)}else noRecordsFound(),infoText.innerHTML=`Found - ${t.length} Bookmarks`},3e3)}function loadErrors(e){result.innerHTML=initLoading(),e&&setTimeout(()=>{result.innerHTML=`<tr><td colspan="2"><span class="error-msg">${e}</span></td></tr>`},2e3)}function noRecordsFound(){result.innerHTML='<tr><td colspan="2">Oops! I\'m very Sorry, No Bookmarks Found.</td></tr>'}function displayPlaceholder(){return'<div class="ph-item">\n        <div class="ph-col-12">\n            <div class="ph-row">\n                <div class="ph-col-6"></div>\n                <div class="ph-col-6 empty"></div>\n                <div class="ph-col-4"></div>\n                <div class="ph-col-8 empty"></div>\n                <div class="ph-col-6"></div>\n                <div class="ph-col-6 empty"></div>\n                <div class="ph-col-12"></div>\n            </div>\n        </div>\n    </div>'}function initLoading(){return`<tr><td colspan="2">${displayPlaceholder()}</td></tr>\n        <tr><td colspan="2">${displayPlaceholder()}</td></tr>`}const allBtn=document.querySelector("#allBtn"),searchBtn=document.querySelector("#searchBtn"),recentBtn=document.querySelector("#recentBtn"),result=document.querySelector("#result"),searchKeyword=document.querySelector("#searchTxtb"),infoText=document.querySelector("#infoHolder");var bookmarObject=new Array;recentBtn.addEventListener("click",recentBookmarks),allBtn.addEventListener("click",allBookmarks),searchBtn.addEventListener("click",searchBookmarks),searchKeyword.addEventListener("keyup",searchBoxAction),window.addEventListener("DOMContentLoaded",async()=>{result.innerHTML=initLoading(),onLoadInit(),recentBookmarks()});